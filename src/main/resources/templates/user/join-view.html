<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" 
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/default}">

<section layout:fragment="contents">
    <div class="container mt-5">
        <div class="card p-5 shadow-lg">
            <h3 class="text-center mb-4">회원가입</h3>

                <div class="form-group">
                    <label for="loginId">아이디</label>
                    <input type="text" id="loginId" placeholder="아이디를 입력해주세요" class="form-control">
                </div>

                <div class="form-group">
                    <label for="password">비밀번호</label>
                    <input type="password" id="password" placeholder="비밀번호를 입력해주세요" class="form-control">
                </div>

                <div class="form-group">
                    <label for="name">이름</label>
                    <input type="text" id="name" placeholder="이름을 입력해주세요" class="form-control">
                </div>

                <div class="form-group">
                    <label for="nickname">닉네임</label>
                    <input type="text" id="nickName" placeholder="닉네임을 입력해주세요" class="form-control">
                </div>

                <div class="form-group">
                    <label for="birthday">생년월일</label>
                    <input type="text" id="birthday" placeholder="생년월일을 입력해주세요" class="form-control">
                </div>

                <div class="form-group">
                    <label for="email">이메일</label>
                    <input type="email" id="email" placeholder="이메일을 입력해주세요" class="form-control">
                </div>


	            <!-- 성별 선택 라디오 인풋 -->
                <div class="form-group">
                    <label>성별</label>
                    <div class="d-flex">
                        <div class="form-check form-check-inline mr-3">
                            <input class="form-check-input" type="radio" id="male" name="gender" value="male" checked>
                            <label class="form-check-label" for="male">남성</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" id="female" name="gender" value="female">
                            <label class="form-check-label" for="female">여성</label>
                        </div>
                    </div>
                </div>

                <button type="button" class="btn btn-success btn-block mt-4" id="joinBtn">가입하기</button>
        </div>
    </div>
</section>

	<script layout:fragment="script">
		$(document).ready(function() {
			
			$("#joinBtn").on("click", function() {
				
				let loginId = $("#loginId").val();
				let password = $("#password").val();
				let name = $("#name").val();
				let nickName = $("#nickName").val();
				let birthday = $("#birthday").val();
				let email = $("#email").val();
				let gender = $("input[name='gender']:checked").val();
				
				if(loginId == "") {
					alert("아이디를 입력하세요");
					return;
				}
				
				
				$.ajax({
					type:"post"
					, url:"/user/join"
					, data:{"loginId":loginId, "password":password, "name":name, "nickName":nickName, "birthday":birthday, "email":email, "gender":gender}
					, success:function(data) {
						if(data.result == "success") {
							location.href = "/user/login-view";
						} else{
							alert("회원가입 실패 !! " + data.message);
						}
					}
		            , error: function(xhr, status, error) {
		                // xhr 객체를 통해 상태 코드와 메시지를 확인할 수 있습니다.
		                alert("회원가입 에러! 상태 코드: " + xhr.status + ", 오류 메시지: " + error);
		            }
					
					
				});
				
				
				
			});
			
			
			
		});
	
	</script>
	
</html>